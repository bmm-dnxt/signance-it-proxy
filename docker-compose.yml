version: '3'

services:
    nginx:
       image: nginx:1.15-alpine
       ports:
         - "80:80"
         - "443:443"
       volumes:
         - ./data/nginx:/etc/nginx/conf.d
         - ./data/certbot/conf:/etc/letsencrypt
         - ./data/certbot/www:/var/www/certbot
         - /opt/it/proxy:/var/ssl:ro
       networks:
         - meet.jitsi
         - mattermost
         - owncloud
   
    certbot:
       image: certbot/certbot
       volumes:
         - ./data/certbot/conf:/etc/letsencrypt
         - ./data/certbot/www:/var/www/certbot

networks:
   meet.jitsi:
           external:
                   name: jitsi
   mattermost:
           driver: bridge
   owncloud:
           driver: bridge

